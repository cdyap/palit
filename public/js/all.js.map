{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":[";(function ($) {\n\n    'use strict';\n\n    $('.alert[data-auto-dismiss]').each(function (index, element) {\n        var $element = $(element),\n            timeout  = $element.data('auto-dismiss') || 5000;\n\n        setTimeout(function () {\n            $element.alert('close');\n        }, timeout);\n    });\n\n})(jQuery);\n\n$(document).ready(function(){\n\t$('.dropright').on('shown.bs.dropdown', function(){\n\t\t$(this).addClass('active');\n\t});\n\t$('.dropright').on('hidden.bs.dropdown', function(){\n\t\t$(this).removeClass('active');\n\t});\n\tvar header = $(\".navbar\");\n    $(window).scroll(function() {\n        var scroll = $(window).scrollTop();\n\n        if (scroll >= 80) {\n            header.addClass('z-depth-1-half');\n        } else {\n            header.removeClass(\"z-depth-1-half\");\n        }\n    });\n});\n\n$('body.admin.show, body.admin.new').ready(function(){\n\t$('[data-toggle=\"tooltip\"]').tooltip();\n\t\n\t// prevent 'enter' submitting form.\n\t$('form:not(\".with-cascading-disabling\")').on(\"keypress\", \":input:not(textarea)\", function(event) {\n\t    return event.keyCode != 13;\n\t});\n\n\t$(\"form.with-cascading-disabling input[name=attribute_1]\").on(\"change paste keyup\", function() {\n\t\tswitch($(this).val().length) {\n\t\t\tcase 0: \n\t\t\t\tfor (var i = 2; i <= 5; i++) {\n\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t}\t\t\t\t\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t$(\"form input[name=attribute_2]\").removeAttr(\"disabled\");\n\t\t\t\tbreak;\n\n\t\t} \n\t});\n\t$(\"form.with-cascading-disabling input[name=attribute_2]\").on(\"change paste keyup\", function() {\n\t\tswitch($(this).val().length) {\n\t\t\tcase 0: \n\t\t\t\tfor (var i = 3; i <= 5; i++) {\n\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t$(\"form input[name=attribute_3]\").removeAttr(\"disabled\");\n\t\t\t\tbreak;\n\n\t\t} \n\t});\n\t$(\"form.with-cascading-disabling input[name=attribute_3]\").on(\"change paste keyup\", function() {\n\t\tswitch($(this).val().length) {\n\t\t\tcase 0: \n\t\t\t\tfor (var i = 4; i <= 5; i++) {\n\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t$(\"form input[name=attribute_4]\").removeAttr(\"disabled\");\n\t\t\t\tbreak;\n\n\t\t} \n\t});\n\t$(\"form.with-cascading-disabling input[name=attribute_4]\").on(\"change paste keyup\", function() {\n\t\tswitch($(this).val().length) {\n\t\t\tcase 0: \n\t\t\t\t$(\"form input[name=attribute_5]\").val(null);\n\t\t\t\t$(\"form input[name=attribute_5]\").attr(\"disabled\", \"disabled\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t$(\"form input[name=attribute_5]\").removeAttr(\"disabled\");\n\t\t\t\tbreak;\n\n\t\t} \n\t});\n\n\t$('a.close.delete-variant').popover({\n\t\ttrigger: 'focus'\n\t});\n\n\t$('a.close.delete-variant').on('inserted.bs.popover', function () {\n\t\t$(this).addClass('highlight');\n\t});\n\n\t$('a.close.delete-variant').on('hide.bs.popover', function () {\n\t\t$(this).removeClass('highlight');\n\t});\n\n\t$('table.table').on('click', 'a.close.delete-variant.highlight', function() {\n\t\tvariant_id = $(this).attr('variant');\n\t\tdelete_variant(variant_id);\n\t});\n\n\tfunction delete_variant(variant_id){\n\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\tvar data_for_sending = {};\n\t\tdata_for_sending.variant_id = variant_id;\n\t\tdata_for_sending._token = token;\n\t\t\n\t\turl = \"/deleteVariant/\" + variant_id;\n\n\t\t$.ajaxSetup({\n\t\t    beforeSend: function(xhr, type) {\n\t\t        if (!type.crossDomain) {\n\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t        }\n\t\t    },\n\t\t});\n\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: 'DELETE',\n\t\t    url: url,\n\t\t    data: JSON.stringify(data_for_sending),\n\t\t    success: function(a) {\n\t\t    \tconsole.log(a);\n\n\t\t    },\n\t\t    error: function(a) {\n\t\t    \t\n\t\t    }\n\t  \t});\t\t\n\t}\n\n\t$('#toggle_availability').click(function(){\n\t\ttoggle_available($(this).attr('variant'));\n\t});\n\n\t$('table.variants_table').on('click', '.toggle_availability_variant', function(){\n\t\ttoggle_available_variant($(this).data('variant'));\n\t});\n\n\tfunction toggle_available(product_id){\n\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\tvar data_for_sending = {};\n\t\tdata_for_sending.product_id = product_id;\n\t\tdata_for_sending._token = token;\n\t\t// data_for_sending._method = 'PATCH';\n\t\t\n\t\turl = \"/toggleAvailability/\" + product_id;\n\n\t\t$.ajaxSetup({\n\t\t    beforeSend: function(xhr, type) {\n\t\t        if (!type.crossDomain) {\n\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t        }\n\t\t    },\n\t\t});\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: 'PATCH',\n\t\t    url: url,\n\t\t    data: JSON.stringify(data_for_sending),\n\t\t    success: function(a) {\n\t\t    \tif(a.is_available) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    \t$('#product_availability').removeClass('text-red');\n\t\t\t    \t$('#product_availability').text('AVAILABLE');\n\n\t\t\t    } else {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    \t$('#product_availability').addClass('text-red');\n\t\t\t    \t$('#product_availability').text('UNAVAILABLE');\n\t\t\t    }\n\t\t    },\n\t\t    error: function(xhr, status, error) {\n\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t    }\n\t  \t});\t\n\n\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t}\n\n\tfunction toggle_available_variant(variant_id){\n\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\tvar data_for_sending = {};\n\t\tdata_for_sending.variant_id = variant_id;\n\t\tdata_for_sending._token = token;\n\t\t// data_for_sending._method = 'PATCH';\n\t\t\n\t\turl = \"/toggleAvailabilityVariant/\" + variant_id;\n\n\t\t$.ajaxSetup({\n\t\t    beforeSend: function(xhr, type) {\n\t\t        if (!type.crossDomain) {\n\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t        }\n\t\t    },\n\t\t});\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: 'PATCH',\n\t\t    url: url,\n\t\t    data: JSON.stringify(data_for_sending),\n\t\t    success: function(a) {\n\t\t    \tif(a.is_available) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    \t$row = $('.' + a.class);\n\t\t\t    \t$row.find('.availability').removeClass('text-red');\n\t\t\t    \t$row.find('.availability').addClass('text-green');\n\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Available');\n\t\t\t    \t$row.find('.toggle_availability_variant').text('Make unavailable');\n\n\t\t\t    } else {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    \t$row = $('.' + a.class);\n\t\t\t    \t$row.find('.availability').addClass('text-red');\n\t\t\t    \t$row.find('.availability').removeClass('text-green');\n\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Unavailable');\n\t\t\t    \t$row.find('.toggle_availability_variant').text('Make available');\n\t\t\t    }\n\t\t    },\n\t\t    error: function(xhr, status, error) {\n\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t    }\n\t  \t});\t\n\n\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t}\n\n\t$('#add_variant_form').submit(function(e){\n\t\te.preventDefault();\n\n\t\t$.ajaxSetup({\n\t\t  headers: {\n\t\t    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t  }\n\t\t});\n\n\t\t$this_form = $(this);\n\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: $('#add_variant_form').attr('method'),\n\t\t    url: $('#add_variant_form').attr('action'),\n\t\t    data: $('#add_variant_form').serialize(),\n\t\t    success: function(a) {\n\t\t    \tif(a.success) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.message+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\n\t\t\t\t\tnew_variant = '<tr class=\"variant_'+a.variant.id+'\" data-id=\"'+a.variant.id+'\" data-inventory=\"'+a.variant.inventory+'\" data-price=\"'+a.variant.price+'\"><td class=\"attribute_1\">'+a.variant.attribute_1+'</td>';\n\t\t\t\t\tif (typeof a.variant.attribute_2 !== 'undefined'){\n\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_2\">'+a.variant.attribute_2+'</td>';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof a.variant.attribute_3 !== 'undefined'){\n\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_3\">'+a.variant.attribute_3+'</td>';\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof a.variant.attribute_4 !== 'undefined'){\n\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_4\">'+a.variant.attribute_4+'</td>';\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof a.variant.attribute_5 !== 'undefined'){\n\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_5\">'+a.variant.attribute_5+'</td>';\n\t\t\t\t\t}\n\n\t\t\t\t\tnew_variant = new_variant + '<td class=\"text-right\">'+a.variant.inventory+'</td><td class=\"text-right\">'+a.variant.view_price+'</td><td class=\"text-center availability text-green\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Available\"><i class=\"fas fa-circle\"></i></td><td><div class=\"btn-group dropright float-right\"><div class=\"option-dropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fas fa-ellipsis-v\"></i></div><div class=\"dropdown-menu\"><a class=\"dropdown-item edit_variant\" href=\"javascript:void(0);\">Edit variant</a><a class=\"dropdown-item toggle_availability_variant\" href=\"javascript:void(0);\" data-variant=\"'+a.variant.id+'\">Make unavailable</a><div class=\"dropdown-divider\"></div><a class=\"dropdown-item delete\" onClick=\"window.location.reload()\">Click to refresh and delete this variant.</a></div></div></td></tr>';\n\t\t\t\t\t$('#total_inventory').text(a.total_inventory);\n\t\t\t\t\t$('table.variants_table').append(new_variant);\n\t\t\t\t\t$('#no_variants_yet').remove();\n\t\t\t    } else {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.message+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>').fadeTo(2000, 500);\n\t\t\t    \t$('#total_inventory').text(a.total_inventory);\n\t\t\t    }\n\t\t    },\n\t\t    error: function(a) {\n\t\t    \tconsole.log(a.message);\n\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t    }\n\t  \t});\t\n\t  \t$this_form.find('input[name=attribute_1],input[name=attribute_2],input[name=attribute_3],input[name=attribute_4],input[name=attribute_5]').val(\"\");\n\t  \t$this_form.find('input[name=inventory]').val(0);\n\t\t$this_form.find('input[name=attribute_1]').select();\n\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t$(\"body\").tooltip({\n\t\t    selector: '[data-toggle=\"tooltip\"]'\n\t\t});\n\t});\n\n\tfunction removeAddedAlerts(){\n\t\t$('.alerts-holder').find('.alert:last').alert('close');\n\t}\n\t\n\t$('table.table').on('show.bs.dropdown', 'td .dropright', function(){\n\t\t$(this).parents('tr').addClass('active');\n\t\t$(this).parents('table').removeClass('table-hover');\n\t});\n\n\t$('table.table').on('hidden.bs.dropdown', 'td .dropright', function(){\n\t\t$(this).parents('tr').removeClass('active');\n\t\t$(this).parents('table').addClass('table-hover');\n\t});\n\n\t$('table.table').on('click', '.edit_variant', function() {\n\t\t$('#edit_variant_block').removeClass('hide');\n\n\t\t$row = $(this).closest('tr');\n\t\t$('#edit_variant_block').find('input[name=attribute_1]').val($row.find('.attribute_1').text());\n\t\t$('#edit_variant_block').find('input[name=attribute_2]').val($row.find('.attribute_2').text());\n\t\t$('#edit_variant_block').find('input[name=attribute_3]').val($row.find('.attribute_3').text());\n\t\t$('#edit_variant_block').find('input[name=attribute_4]').val($row.find('.attribute_4').text());\n\t\t$('#edit_variant_block').find('input[name=attribute_5]').val($row.find('.attribute_5').text());\n\t\t$('#edit_variant_block').find('input[name=inventory]').val($row.data('inventory'));\n\t\t$('#edit_variant_block').find('input[name=variant_id]').val($row.data('id'));\n\t\t$('#edit_variant_block').find('input[name=price]').val($row.data('price'));\n\t});\n\n\t$('#edit_variant_block').on('click', 'button.close', function() {\n\t\t$('#edit_variant_block').addClass('hide');\n\t\t$('#edit_variant_block form').reset();\n\t});\n});"]}