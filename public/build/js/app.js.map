{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$('body.admin').on('ready turbolinks:load', function () { $.onmount() });\n$('body.admin').on('turbolinks:before-cache', function () { $.onmount.teardown() });\n\n$(document).on('turbolinks:load',function(){\n\t;(function ($) {\n\n\t    'use strict';\n\n\t    $('.alert[data-auto-dismiss]').each(function (index, element) {\n\t        var $element = $(element),\n\t            timeout  = $element.data('auto-dismiss') || 5000;\n\n\t        setTimeout(function () {\n\t            $element.alert('close');\n\t        }, timeout);\n\t    });\n\n\t})(jQuery);\n\n\t$('body.admin').ready(function(){\n\t\t$('.dropright').on('shown.bs.dropdown', function(){\n\t\t\t$(this).addClass('active');\n\t\t});\n\t\t$('.dropright').on('hidden.bs.dropdown', function(){\n\t\t\t$(this).removeClass('active');\n\t\t});\n\t\tvar header = $(\".navbar\");\n\n\t    $(window).scroll(function() {\n\t        var scroll = $(window).scrollTop();\n\t        if (scroll >= 80) {\n\t            header.addClass('z-depth-1-half');\n\t        } else {\n\t            header.removeClass(\"z-depth-1-half\");\n\t        }\n\t    });\n\n\t    $(window).scrollTop($(window).scrollTop()+1);\n\t    $(window).scrollTop($(window).scrollTop()-1);\n\t});\n\n\t$('body.admin.index.AdminController').ready(function(){\n\t\t// $('.auto-confirm input[type=\"checkbox\"]').on('change', function(){\n\t\t// \ttoggleAutoConfirm(this.checked);\n\t\t// });\n\n\t\t// function toggleAutoConfirm(auto_confirm_orders){\n\n\t\t// \ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t// \tvar data_for_sending = {};\n\t\t// \tdata_for_sending.auto_confirm_orders = auto_confirm_orders;\n\t\t// \tdata_for_sending._token = token;\n\t\t// \t// data_for_sending._method = \"PATCH\";\n\t\t\t\n\t\t// \turl = \"/orders/toggleAutoConfirm\";\n\n\t\t// \t$.ajaxSetup({\n\t\t// \t    beforeSend: function(xhr, type) {\n\t\t// \t        if (!type.crossDomain) {\n\t\t// \t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t// \t        }\n\t\t// \t    },\n\t\t// \t});\n\t\t// \t$.ajax({\n\t\t// \t    dataType: 'JSON',\n\t\t// \t    method: 'PATCH',\n\t\t// \t    url: url,\n\t\t// \t    data: JSON.stringify(data_for_sending),\n\t\t// \t    contentType: \"json\",\n\t\t// \t    processData: false,\n\t\t// \t    success: function(a) {\n\t\t// \t    \tif(a.success) {\n\t\t// \t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Auto-confirm orders <strong>'+a.message+'</strong>!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t// \t\t    }\n\t\t// \t    }\n\t\t//   \t});\t\n\n\t\t//   \tsetTimeout(removeAddedAlerts, 5000);\n\t\t// }\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n\t// $('body.admin.orders_unpaid.OrdersController').ready(function(){\n\t\t\n\t// \t$('.delete-order-button').toggle(function() {\n\t// \t    $('.delete-order-form').submit();\n\t// \t}, function() {\n\t// \t    $(this).html('Click again to delete this order');\n\t// \t});\n\t// });\n\n\t$('body.admin table-sticky').ready(function(){\n\t\t// Declare variables and shorthands\n\t    var $t     = $(this),\n\t        $w     = $(window),\n\t        $thead = $(this).find('thead').clone(),\n\t        $col   = $(this).find('thead, tbody').clone();\n\t    // Here we select for <table> elements universally,\n\t    // but you can definitely fine tune your selector\n\t    \n\t    $('.table-sticky').each(function() {\n\t\t\tif($(this).find('thead').length > 0 && $(this).find('th').length > 0) {\n\t\t\t\t// Clone <thead>\n\t\t\t\tvar $w\t   = $(window),\n\t\t\t\t\t$t\t   = $(this),\n\t\t\t\t\t$thead = $t.find('thead').clone(),\n\t\t\t\t\t$col   = $t.find('thead, tbody').clone();\n\n\t\t\t\t// Add class, remove margins, reset width and wrap table\n\t\t\t\t$t\n\t\t\t\t.addClass('sticky-enabled')\n\t\t\t\t.css({\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\twidth: '100%'\n\t\t\t\t}).wrap('<div class=\"sticky-wrap\" />');\n\n\t\t\t\tif($t.hasClass('overflow-y')) $t.removeClass('overflow-y').parent().addClass('overflow-y');\n\n\t\t\t\t// Create new sticky table head (basic)\n\t\t\t\t$t.after('<table class=\"sticky-thead\" />');\n\n\t\t\t\t// If <tbody> contains <th>, then we create sticky column and intersect (advanced)\n\t\t\t\tif($t.find('tbody th').length > 0) {\n\t\t\t\t\t$t.after('<table class=\"sticky-col\" /><table class=\"sticky-intersect\" />');\n\t\t\t\t}\n\n\t\t\t\t// Create shorthand for things\n\t\t\t\tvar $stickyHead  = $(this).siblings('.sticky-thead'),\n\t\t\t\t\t$stickyCol   = $(this).siblings('.sticky-col'),\n\t\t\t\t\t$stickyInsct = $(this).siblings('.sticky-intersect'),\n\t\t\t\t\t$stickyWrap  = $(this).parent('.sticky-wrap');\n\n\t\t\t\t$stickyHead.append($thead);\n\n\t\t\t\t$stickyCol\n\t\t\t\t.append($col)\n\t\t\t\t\t.find('thead th:gt(0)').remove()\n\t\t\t\t\t.end()\n\t\t\t\t\t.find('tbody td').remove();\n\n\t\t\t\t$stickyInsct.html('<thead><tr><th>'+$t.find('thead th:first-child').html()+'</th></tr></thead>');\n\t\t\t\t\n\t\t\t\t// Set widths\n\t\t\t\tvar setWidths = function () {\n\t\t\t\t\t\t$t\n\t\t\t\t\t\t.find('thead th').each(function (i) {\n\t\t\t\t\t\t\t$stickyHead.find('th').eq(i).width($(this).width());\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.end()\n\t\t\t\t\t\t.find('tr').each(function (i) {\n\t\t\t\t\t\t\t$stickyCol.find('tr').eq(i).height($(this).height());\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Set width of sticky table head\n\t\t\t\t\t\t$stickyHead.width($t.width());\n\n\t\t\t\t\t\t// Set width of sticky table col\n\t\t\t\t\t\t$stickyCol.find('th').add($stickyInsct.find('th')).width($t.find('thead th').width())\n\t\t\t\t\t},\n\t\t\t\t\trepositionStickyHead = function () {\n\t\t\t\t\t\t// Return value of calculated allowance\n\t\t\t\t\t\tvar allowance = calcAllowance();\n\t\t\t\t\t\n\t\t\t\t\t\t// Check if wrapper parent is overflowing along the y-axis\n\t\t\t\t\t\tif($t.height() > $stickyWrap.height()) {\n\t\t\t\t\t\t\t// If it is overflowing (advanced layout)\n\t\t\t\t\t\t\t// Position sticky header based on wrapper scrollTop()\n\t\t\t\t\t\t\tif($stickyWrap.scrollTop() > 0) {\n\t\t\t\t\t\t\t\t// When top of wrapping parent is out of view\n\t\t\t\t\t\t\t\t$stickyHead.add($stickyInsct).css({\n\t\t\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\t\t\ttop: $stickyWrap.scrollTop(),\n\t\t\t\t\t\t\t\t\tdisplay: \"table\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// When top of wrapping parent is in view\n\t\t\t\t\t\t\t\t$stickyHead.add($stickyInsct).css({\n\t\t\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\tdisplay: \"none\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If it is not overflowing (basic layout)\n\t\t\t\t\t\t\t// Position sticky header based on viewport scrollTop\n\t\t\t\t\t\t\tif($w.scrollTop() > $t.offset().top && $w.scrollTop() < $t.offset().top + $t.outerHeight() - allowance) {\n\t\t\t\t\t\t\t\t// When top of viewport is in the table itself\n\t\t\t\t\t\t\t\t$stickyHead.add($stickyInsct).css({\n\t\t\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\t\t\ttop: $w.scrollTop() - $t.offset().top,\n\t\t\t\t\t\t\t\t\tdisplay: \"table\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// When top of viewport is above or below table\n\t\t\t\t\t\t\t\t$stickyHead.add($stickyInsct).css({\n\t\t\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\tdisplay: \"none\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trepositionStickyCol = function () {\n\t\t\t\t\t\tif($stickyWrap.scrollLeft() > 0) {\n\t\t\t\t\t\t\t// When left of wrapping parent is out of view\n\t\t\t\t\t\t\t$stickyCol.add($stickyInsct).css({\n\t\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\t\tleft: $stickyWrap.scrollLeft()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// When left of wrapping parent is in view\n\t\t\t\t\t\t\t$stickyCol\n\t\t\t\t\t\t\t.css({ opacity: 0 })\n\t\t\t\t\t\t\t.add($stickyInsct).css({ left: 0 });\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcalcAllowance = function () {\n\t\t\t\t\t\tvar a = 0;\n\t\t\t\t\t\t// Calculate allowance\n\t\t\t\t\t\t$t.find('tbody tr:lt(3)').each(function () {\n\t\t\t\t\t\t\ta += $(this).height();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Set fail safe limit (last three row might be too tall)\n\t\t\t\t\t\t// Set arbitrary limit at 0.25 of viewport height, or you can use an arbitrary pixel value\n\t\t\t\t\t\tif(a > $w.height()*0.25) {\n\t\t\t\t\t\t\ta = $w.height()*0.25;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Add the height of sticky header\n\t\t\t\t\t\ta += $stickyHead.height();\n\t\t\t\t\t\treturn a;\n\t\t\t\t\t};\n\n\t\t\t\tsetWidths();\n\n\t\t\t\t$t.parent('.sticky-wrap').scroll($.throttle(250, function() {\n\t\t\t\t\trepositionStickyHead();\n\t\t\t\t\trepositionStickyCol();\n\t\t\t\t}));\n\n\t\t\t\t$w.on('load', function(){\n\t\t\t\t\tsetWidths\n\t\t\t\t})\n\t\t\t\t.resize($.debounce(250, function () {\n\t\t\t\t\tsetWidths();\n\t\t\t\t\trepositionStickyHead();\n\t\t\t\t\trepositionStickyCol();\n\t\t\t\t}))\n\t\t\t\t.scroll($.throttle(200, repositionStickyHead));\n\t\t\t}\n\t\t});\n\t});\n\t$('body.admin.shipping.SettingsController').ready(function(){\n\t\t$('table.shippings_table').on('click', '.toggle_availability_shipping', function(){\n\t\t\ttoggle_available_shipping($(this).data('variant'));\n\t\t});\n\n\t\tfunction toggle_available_shipping(shipping_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.shipping_id = shipping_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailabilityShipping/\" + shipping_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong>!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').removeClass('text-red');\n\t\t\t\t    \t$row.find('.availability').addClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Available');\n\t\t\t\t    \t$row.find('.toggle_availability_shipping').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong>!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').addClass('text-red');\n\t\t\t\t    \t$row.find('.availability').removeClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Unavailable');\n\t\t\t\t    \t$row.find('.toggle_availability_shipping').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\t$('body.admin.show.ProductsController, body.admin.new.ProductsController').ready(function(){\n\t\t$('[data-toggle=\"tooltip\"]').tooltip();\n\t\t\n\t\t// prevent 'enter' submitting form.\n\t\t// $('form:not(\".with-cascading-disabling, #add_variant_form\")').on(\"keypress\", \":input:not(textarea)\", function(event) {\n\t\t//     return event.keyCode != 13;\n\t\t// });\n\n\t\t$(\"form.with-cascading-disabling input[name=attribute_1]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\tfor (var i = 2; i <= 5; i++) {\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_2]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\t\t$(\"form.with-cascading-disabling input[name=attribute_2]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\tfor (var i = 3; i <= 5; i++) {\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_3]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\t\t$(\"form.with-cascading-disabling input[name=attribute_3]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\tfor (var i = 4; i <= 5; i++) {\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_4]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\t\t$(\"form.with-cascading-disabling input[name=attribute_4]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\t$(\"form input[name=attribute_5]\").val(null);\n\t\t\t\t\t$(\"form input[name=attribute_5]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_5]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\n\t\t$('a.close.delete-variant').popover({\n\t\t\ttrigger: 'focus'\n\t\t});\n\n\t\t$('a.close.delete-variant').on('inserted.bs.popover', function () {\n\t\t\t$(this).addClass('highlight');\n\t\t});\n\n\t\t$('a.close.delete-variant').on('hide.bs.popover', function () {\n\t\t\t$(this).removeClass('highlight');\n\t\t});\n\n\t\t$('table.table').on('click', 'a.close.delete-variant.highlight', function() {\n\t\t\tvariant_id = $(this).attr('variant');\n\t\t\tdelete_variant(variant_id);\n\t\t});\n\n\t\tfunction delete_variant(variant_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.variant_id = variant_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t\n\t\t\turl = \"/deleteVariant/\" + variant_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'DELETE',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tconsole.log(a);\n\n\t\t\t    },\n\t\t\t    error: function(a) {\n\t\t\t    \t\n\t\t\t    }\n\t\t  \t});\t\t\n\t\t}\n\n\t\t$('#toggle_availability').click(function(){\n\t\t\ttoggle_available($(this).attr('variant'));\n\t\t});\n\n\t\t$('#toggle_availability_collection').click(function(){\n\t\t\ttoggle_available_collection($(this).attr('collection'));\n\t\t});\n\n\t\t$('table.variants_table').on('click', '.toggle_availability_variant', function(){\n\t\t\ttoggle_available_variant($(this).data('variant'));\n\t\t});\n\n\t\tfunction toggle_available(product_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.product_id = product_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailability/\" + product_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').removeClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('AVAILABLE');\n\t\t\t\t    \t$('#toggle_availability').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').addClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('UNAVAILABLE');\n\t\t\t\t    \t$('#toggle_availability').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction toggle_available_collection(collection_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.collection_id = collection_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t\n\t\t\turl = \"/toggleAvailabilityCollection/\" + collection_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').removeClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('AVAILABLE');\n\t\t\t\t    \t$('#toggle_availability_collection').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').addClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('UNAVAILABLE');\n\t\t\t\t    \t$('#toggle_availability_collection').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction toggle_available_variant(variant_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.variant_id = variant_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailabilityVariant/\" + variant_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').removeClass('text-red');\n\t\t\t\t    \t$row.find('.availability').addClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Available');\n\t\t\t\t    \t$row.find('.toggle_availability_variant').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').addClass('text-red');\n\t\t\t\t    \t$row.find('.availability').removeClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Unavailable');\n\t\t\t\t    \t$row.find('.toggle_availability_variant').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\t$('#add_variant_form').submit(function(e){\n\t\t\te.preventDefault();\n\n\t\t\t$.ajaxSetup({\n\t\t\t  headers: {\n\t\t\t    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t  }\n\t\t\t});\n\n\t\t\t$this_form = $(this);\n\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: $('#add_variant_form').attr('method'),\n\t\t\t    url: $('#add_variant_form').attr('action'),\n\t\t\t    data: $('#add_variant_form').serialize(),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.success) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.message+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\n\t\t\t\t\t\tnew_variant = '<tr class=\"variant_'+a.variant.id+'\" data-id=\"'+a.variant.id+'\" data-inventory=\"'+a.variant.inventory+'\" data-price=\"'+a.variant.price+'\" data-itemID=\"'+a.variant.id+'\"><td class=\"sortable-handle\"><i class=\"fas fa-arrows-alt-v\"></i></td><td class=\"attribute_1\">'+a.variant.attribute_1+'</td>';\n\t\t\t\t\t\tif (typeof a.variant.attribute_2 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_2\">'+a.variant.attribute_2+'</td>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof a.variant.attribute_3 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_3\">'+a.variant.attribute_3+'</td>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof a.variant.attribute_4 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_4\">'+a.variant.attribute_4+'</td>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof a.variant.attribute_5 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_5\">'+a.variant.attribute_5+'</td>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"text-right\">'+a.variant.inventory+'</td><td class=\"text-right\">'+a.variant.view_price+'</td><td class=\"text-center availability text-green\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Available\"><i class=\"fas fa-circle\"></i></td><td><div class=\"btn-group dropright float-right\"><div class=\"option-dropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fas fa-ellipsis-v\"></i></div><div class=\"dropdown-menu\"><a class=\"dropdown-item edit_variant\" href=\"javascript:void(0);\">Edit variant</a><a class=\"dropdown-item toggle_availability_variant\" href=\"javascript:void(0);\" data-variant=\"'+a.variant.id+'\">Make unavailable</a><div class=\"dropdown-divider\"></div><a class=\"dropdown-item delete\" onClick=\"window.location.reload()\">Click to refresh and delete this variant.</a></div></div></td></tr>';\n\t\t\t\t\t\t$('#available_inventory').text(a.available_inventory);\n\t\t\t\t\t\t$('table.variants_table').append(new_variant);\n\t\t\t\t\t\t$('#no_variants_yet').remove();\n\t\t\t\t\t\tconsole.log(a);\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.message+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>').fadeTo(2000, 500);\n\t\t\t\t    \t$('#available_inventory').text(a.available_inventory);\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(a) {\n\t\t\t    \tconsole.log(a);\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\t\t  \t$this_form.find('input[name=attribute_1],input[name=attribute_2],input[name=attribute_3],input[name=attribute_4],input[name=attribute_5]').val(\"\");\n\t\t  \t$this_form.find('input[name=inventory]').val(0);\n\t\t\t$this_form.find('input[name=attribute_1]').select();\n\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t$(\"body\").tooltip({\n\t\t\t    selector: '[data-toggle=\"tooltip\"]'\n\t\t\t});\n\t\t});\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t\t\n\t\t$('table.table').on('show.bs.dropdown', 'td .dropright', function(){\n\t\t\t$(this).parents('tr').addClass('active');\n\t\t\t$(this).parents('table').removeClass('table-hover');\n\t\t});\n\n\t\t$('table.table').on('hidden.bs.dropdown', 'td .dropright', function(){\n\t\t\t$(this).parents('tr').removeClass('active');\n\t\t\t$(this).parents('table').addClass('table-hover');\n\t\t});\n\n\t\t$('table.table').on('click', '.edit_variant', function() {\n\t\t\t$('#edit_variant_block').removeClass('hide');\n\n\t\t\t$row = $(this).closest('tr');\n\t\t\t$('#edit_variant_block').find('input[name=attribute_1]').val($row.find('.attribute_1').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_2]').val($row.find('.attribute_2').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_3]').val($row.find('.attribute_3').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_4]').val($row.find('.attribute_4').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_5]').val($row.find('.attribute_5').text());\n\t\t\t$('#edit_variant_block').find('input[name=inventory]').val($row.data('inventory'));\n\t\t\t$('#edit_variant_block').find('input[name=variant_id]').val($row.data('id'));\n\t\t\t$('#edit_variant_block').find('input[name=price]').val($row.data('price'));\n\t\t});\n\n\t\t$('#edit_variant_block').on('click', 'button.close', function() {\n\t\t\t$('#edit_variant_block').addClass('hide');\n\t\t\t$('#edit_variant_block form').reset();\n\t\t});\n\n\t\t//https://github.com/boxfrommars/rutorika-sortable\n\t\t/**\n\t     *\n\t     * @param type string 'insertAfter' or 'insertBefore'\n\t     * @param entityName\n\t     * @param id\n\t     * @param positionId\n\t     */\n\t\tvar changePosition = function(requestData){\n\t        $.ajax({\n\t            'url': '/sort',\n\t            'type': 'POST',\n\t            'data': requestData,\n\t            'success': function(data) {\n\t                if (data.success) {\n\t                    $('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant reordered!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t                    setTimeout(removeAddedAlerts, 5000);\n\t                } else {\n\t                \t$.each( data.errors, function( key, value ) {\n\t                \t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+value+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t                    \n\t                }\n\t            },\n\t            'error': function(e){\n\t                $('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+e.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t                console.log(e);\n\t                setTimeout(removeAddedAlerts, 5000);\n\t            }\n\t        });\n\t    };\n\n\t    var $sortableTable = $('.variants_table tbody');\n\t    if ($sortableTable.length > 0) {\n\t        $sortableTable.sortable({\n\t            handle: '.sortable-handle',\n\t            axis: 'y',\n\t            update: function(a, b){\n\n\t                var entityName = $(this).data('entityname');\n\t                var $sorted = b.item;\n\n\t                var $previous = $sorted.prev();\n\t                var $next = $sorted.next();\n\n\t                if ($previous.length > 0) {\n\t                    changePosition({\n\t                        parentId: $sorted.data('parentid'),\n\t                        type: 'moveAfter',\n\t                        entityName: entityName,\n\t                        id: $sorted.data('itemid'),\n\t                        positionEntityId: $previous.data('itemid'),\n\t                        _token: $(\"meta[name='csrf-token']\").attr('content')\n\t                    });\n\t                } else if ($next.length > 0) {\n\t                    changePosition({\n\t                        parentId: $sorted.data('parentid'),\n\t                        type: 'moveBefore',\n\t                        entityName: entityName,\n\t                        id: $sorted.data('itemid'),\n\t                        positionEntityId: $next.data('itemid'),\n\t                        _token: $(\"meta[name='csrf-token']\").attr('content')\n\t                    });\n\t                } else {\n\t                    $('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Something went wrong!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t                }\n\t            },\n\t            cursor: \"move\"\n\t        });\n\t        setTimeout(removeAddedAlerts, 5000);\n\t    }\n\t});\n\n\t$('body.admin.show.CollectionsController, body.admin.new.CollectionsController').ready(function(){\n\t\t\n\t\t$('table.products_table').on('click', '.toggle_availability_product', function(){\n\t\t\ttoggle_available_product($(this).data('product'));\n\t\t});\n\n\t\t$('table.products_table').on('click', '.remove', function(){\n\t\t\tremove_from_collection($(this).data('product'),$(this).data('collection'));\n\t\t});\n\n\t\t$('.add_product_block').click(function(){\n\t\t\tshow_add_product_block($(this).data('collectionslug'));\n\t\t});\n\n\t\tfunction show_add_product_block(collection_slug){\n\t\t\t$.get('/getProductsForCollection/'+collection_slug, function(a){ \n\t\t        $table = $('#add_product_form .table tbody');\n\t\t        $table.empty();\n\t\t        $.each( a.products, function( key, value ) {\n\t\t        \tproduct = '<tr><td><div class=\"form-check\"><input class=\"form-check-input\" type=\"checkbox\" name=\"products[]\" value=\"'+value+'\"></div></td><td>'+key+'</td></tr>';\n\t\t        \t$table.append(product);\n\t\t        });\n\t\t        \n\t\t    });\n\n\t\t\t$('#add_product_block').removeClass('hide');\n\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\n\t\t}\n\n\t\tfunction toggle_available_product(product_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.product_id = product_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailability/\" + product_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.slug);\n\t\t\t\t    \t$row.find('.availability').removeClass('text-red');\n\t\t\t\t    \t$row.find('.availability').addClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Available');\n\t\t\t\t    \t$row.find('.toggle_availability_product').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.slug);\n\t\t\t\t    \t$row.find('.availability').addClass('text-red');\n\t\t\t\t    \t$row.find('.availability').removeClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Unavailable');\n\t\t\t\t    \t$row.find('.toggle_availability_product').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \tconsole.log(xhr);\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+xhr.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction remove_from_collection(product_slug, collection_slug) {\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.product_slug = product_slug;\n\t\t\tdata_for_sending.collection_slug = collection_slug;\n\t\t\tdata_for_sending._token = token;\n\t\t\t\n\t\t\turl = \"/removeFromCollection\";\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    method: 'POST',\n\t\t\t    url: url,\n\t\t\t    contentType: \"json\",\n\t\t\t    processData: false,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.success) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.product_name+' removed from '+a.collection_name+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('.' + product_slug).remove();\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Something went wrong!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+xhr.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n\t$('body.admin.show.ProductsController, body.admin.show.CollectionsController').ready(function(){ \n\n\t\tif($('#upload-image-dropzone').length) {\n\t\t\tvar myDropzone = new Dropzone('#upload-image-dropzone',{\n\t\t        paramName: 'file',\n\t\t        addRemoveLinks: true,\n\t\t        maxFilesize: 2, // MB\n\t\t        maxFiles: 1,\n\t\t        acceptedFiles: \".jpeg,.jpg,.png,.gif\",\n\t\t        init: function() {\n\t\t\t\t    this.on('addedfile', function(file) {\n\t\t\t\t\t\tif (this.files.length > 1) {\n\t\t\t\t\t   \t\tthis.removeFile(this.files[0]);\n\t\t\t\t\t  \t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tsuccess: function(xhr, url, status) {\n\t\t\t        $('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Header image uploaded!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t        $('.dz-progress').css('display', 'none');\n\t\t\t        $('.dz-remove').html('Remove file and upload new image');\n\t\t\t        $(\".header-image-block img\").attr(\"src\",url);\n\t\t\t        setTimeout(removeAddedAlerts, 5000);\n\t\t\t        $('#uploadImage').modal('hide');\n\t\t\t        $('.header-image-block.hide').removeClass('hide');\n\t\t\t        $('.delete-header-image-option.hide').removeClass('hide');\n\t\t\t    },\n\t\t\t\terror: function(xhr, error, status) {\n\t\t\t\t\t$('.dz-details, .dz-progress').css('display', 'none');\n\t\t\t\t\t$('.dz-remove').html('Remove upload');\n\n\t\t\t\t\tif (error !== null && typeof error === 'object') {\n\t\t\t\t\t\t$.each( error.errors.file, function( key, value ) {\n\t\t\t\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+value+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+error+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t    \t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n\t$('body.admin.index.InventoryController').ready(function(){\n\t\t// $('.inventory-table tbody tr').click(function(){\n\t\t// \tproduct_id = $(this).data('product');\n\t\t// \t$('.product-block').addClass('hide');\n\t\t// \t$('.block-'+product_id).removeClass('hide');\n\t\t// })\n\t\t//highlight whole input of inputs on form\n\t\t$('.delivery-modal').on('click', 'input[type=number]', function(){\n\t\t\t$(this).select();\n\t\t});\n\t});\n\n\t$('body.admin.create.InventoryController').ready(function(){\n\n\t\t//change datepicker if javascript is available\n\t\t$('.datepicker').attr('type','text');\n\t\t$('.datepicker').prop('readonly', true);\n\t\t$('.datepicker').datepicker({\n\t\t  format: 'yyyy-mm-dd',\n\t\t  autoHide: true,\n\t\t  trigger: false,\n\t\t  startDate: new Date\n\t\t});\n\n\t\t//highlight whole input of inputs on form\n\t\t$('.product-block').on('click', 'input[type=number]', function(){\n\t\t\t$(this).select();\n\t\t});\n\n\t\t$('#confirmProductsModal').on('show.bs.modal', function (e) {\n\t\t\tsupplier = $('#supplier').val();\n\t\t\texpected_arrival = $('#expected_arrival').val();\n\n\t\t\tswitch(supplier.length) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif(!$(\"#confirm-supplier\").hasClass(\"text-red\")){\n\t\t\t\t\t    $(\"#confirm-supplier\").addClass(\"text-red\");\n\t\t\t\t\t}\n\t\t\t\t\t$('#confirm-supplier').html('None entered');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$('#confirm-supplier').removeClass('text-red');\n\t\t\t\t\t$('#confirm-supplier').html(supplier);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tswitch(expected_arrival.length) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif(!$(\"#confirm-date-arrival\").hasClass(\"text-red\")){\n\t\t\t\t\t    $(\"#confirm-date-arrival\").addClass(\"text-red\");\n\t\t\t\t\t}\n\t\t\t\t\t$('#confirm-date-arrival').html('None entered');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$('#confirm-date-arrival').removeClass('text-red');\n\t\t\t\t\t$('#confirm-date-arrival').html(expected_arrival);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tstocked_up_products = $('.input-stockup').filter(function() {\n\t\t\t    return $(this).val() > 0;\n\t\t\t  });\n\n\t\t\ttable = $('.confirm-products tbody');\n\t\t\ttable.empty();\n\t\t\t$('.input-stockup').each(function() {\n\t\t\t\tif($(this).val() > 0) {\n\t\t\t\t\tvar tr = document.createElement(\"tr\");\n\t\t\t\t\tvar td = document.createElement(\"td\");\n\t\t\t\t\tvar txt = document.createTextNode($(this).data('description'));\n\t\t\t\t\trow = \"<tr class='confirmed-products'><td>\"+$(this).data('description')+\"</td><td class='text-right'>\"+$(this).val()+\"</td></tr>\";\n\t\t\t\t\ttable.append(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif($('.confirmed-products').length < 1) {\n\t\t\t\trow = \"<tr class='confirmed-products'><td class='text-red text-center' colspan='2'>No products selected</td></tr>\";\n\t\t\t\t\ttable.append(row);\n\t\t\t}\n\n\t\t\tif($('#confirmProductsModal .text-red').length > 0) {\n\t\t\t\t$('.confirm-products-submit').prop('disabled', true);\n\t\t\t\t$('.confirm-products-submit').html('Resolve errors in red');\n\t\t\t} else {\n\t\t\t\t$('.confirm-products-submit').prop('disabled', false);\n\t\t\t\t$('.confirm-products-submit').html('Stock up products');\n\t\t\t}\n\t\t});\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n});\n\n$('body.orders_index').ready(function(){\n\t$('.dropright').on('shown.bs.dropdown', function(){\n\t\t$(this).addClass('active');\n\t});\n\t$('.dropright').on('hidden.bs.dropdown', function(){\n\t\t$(this).removeClass('active');\n\t});\n\n\t$('body.order_page .cart-modal table.table').on('click', 'a.remove', function(){\n\t\tremoveFromCart($(this).data('company'), $(this).data('rowid'));\n\t});\n\n\t$('body.order_page .product-modal table.table').on('click', 'tbody tr', function(event){\n\n\t\tif (event.target.type !== 'checkbox') {\n\t\t\t$(':checkbox', this).trigger('click');\n\t\t}\n\t});\n\n\tvar debounceChangeQuantity = function(object) {debounce(changeQuantity(object.data('company'), object.data('rowid'), object.val()), 1000, false)};\n\n\t$('body.order_page .cart-modal table.table').on('change', '.item-quantity', function(){\n\t\tdebounceChangeQuantity($(this));\n\t});\n\n\t$('body.order_page .cart-modal table.table').on('click', '.quantity-adjuster.plus', function(){\n\t\tinput = $(this).parent().next();\n\t\tmax = input.attr('max');\n\n\t\t// For some browsers, `attr` is undefined; for others,\n\t\t// `attr` is false.  Check for both.\n\t\tif (typeof max == typeof undefined || max == false) {\n\t\t\tnew_val = +input.val() + 1;\n\t\t\tinput.val(new_val);\n\t\t} else {\n\t\t\tval = +input.val();\n\t\t\tif(val + 1 <= max) {\n\t\t\t\tnew_val = +input.val() + 1;\n\t\t\t\tinput.val(new_val);\n\t\t\t}\n\t\t}\n\t\tdebounceChangeQuantity(input);\n\t});\n\n\t$('body.order_page .cart-modal table.table').on('click', '.quantity-adjuster.minus', function(){\n\t\tinput = $(this).parent().next();\n\t\tval = +input.val();\n\t\tif(val - 1 >= 1) {\n\t\t\tnew_val = +input.val() - 1;\n\t\t\tinput.val(new_val);\n\t\t}\n\t\tdebounceChangeQuantity(input);\n\t});\n\n\t// Returns a function, that, as long as it continues to be invoked, will not\n\t// be triggered. The function will be called after it stops being called for\n\t// N milliseconds. If `immediate` is passed, trigger the function on the\n\t// leading edge, instead of the trailing.\n\twindow.debounce = function (func, wait, immediate) {\n\t\tvar timeout;\n\t\treturn function() {\n\t\t\tvar context = this, args = arguments;\n\t\t\tvar later = function() {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) func.apply(context, args);\n\t\t\t};\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (callNow) func.apply(context, args);\n\t\t};\n\t}\n\n\t$('div.catalogue table tbody tr').addClass('hover-pointer');\n\n\t$('.item-quantity').click(function(){\n\t\t$(this).select();\n\t});\n\n\t$('body.order_page .shipping').on('click', '.shipping-method-radio', function(){\n\t\t$('.shipping-mode').removeClass('selected');\n\t\t$('.shipping'+$(this).val()).addClass('selected');\n\t});\n\n\tif ($('#checkout_form').length === 1) {\n\t\t$('#checkout_form').validate({\n\t\t\trules: {\n\t\t\t\temail: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\temail:true,\n\t\t\t\t},\n\t\t\t\tfirst_name: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tlast_name: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tcountry_code: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tcontact_number: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdigits: true,\n\t\t\t\t},\n\t\t\t\tshipping_address_1: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tcity: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tzip_code: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdigits: true\n\t\t\t\t},\n\t\t\t\tcountry: {\n\t\t\t\t\trequired: true,\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubmitHandler: function(form) {\n\t\t\t    form.submit();\n\t\t\t}\n\t\t});\n\t}\n\n\twindow.changeQuantity = function(companyId, rowId, quantity){\n\n\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\tvar data_for_sending = {};\n\t\tdata_for_sending.rowId = rowId;\n\t\tdata_for_sending.slug = companyId;\n\t\tdata_for_sending.quantity = quantity;\n\t\tdata_for_sending._token = token;\n\t\t// data_for_sending._method = \"PATCH\";\n\t\t\n\t\turl = \"/changeQuantity/\" + companyId + \"/\" + rowId;\n\n\t\t$.ajaxSetup({\n\t\t    beforeSend: function(xhr, type) {\n\t\t        if (!type.crossDomain) {\n\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t        }\n\t\t    },\n\t\t});\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: 'PATCH',\n\t\t    url: url,\n\t\t    data: JSON.stringify(data_for_sending),\n\t\t    contentType: \"json\",\n\t\t    processData: false,\n\t\t    success: function(a) {\n\t\t    \tif(a.success) {\n\t\t\t    \t$('.cart-item.'+a.rowId+' .item_price').text(a.item_price);\n\t\t\t    \t$('#cart_itemcount').text(a.cart_itemcount);\n\t\t\t    \t$('#cart_total').text(a.currency + \" \" + a.cart_total);\n\t\t\t    } else {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Error in updating cart item<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t    }\n\t\t    }\n\t  \t});\t\n\t}\n\n\tfunction removeFromCart(companySlug, rowId){\n\n\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\tvar data_for_sending = {};\n\t\tdata_for_sending.rowId = rowId;\n\t\tdata_for_sending.slug = companySlug;\n\t\tdata_for_sending._token = token;\n\t\t// data_for_sending._method = 'PATCH';\n\t\t\n\t\turl = \"/removeFromCart/\" + companySlug + \"/\" + rowId;\n\n\t\t$.ajaxSetup({\n\t\t    beforeSend: function(xhr, type) {\n\t\t        if (!type.crossDomain) {\n\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t        }\n\t\t    },\n\t\t});\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: 'PATCH',\n\t\t    url: url,\n\t\t    data: JSON.stringify(data_for_sending),\n\t\t    success: function(a) {\n\t\t    \tif(a.success) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss><strong>'+a.name+'</strong> removed!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    \t$('#cart_itemcount').text(a.cart_itemcount);\n\t\t\t    \t$('#cart_total').text(a.cart_total);\n\t\t\t    \t$row = $('.' + a.rowId);\n\t\t\t    \t$row.remove();\n\t\t\t    \tif ($('.cart-modal table.table tr.cart-item').length === 0) {\n\t\t\t    \t\t$('#cart').modal('hide');\n\t\t\t    \t\tlocation.reload();\n\t\t\t    \t}\n\t\t\t    } else {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+'!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t    },\n\t\t    error: function(xhr, status, error) {\n\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t    }\n\t  \t});\t\n\n\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t}\n\n    $(\"body.order_page form .form-check-input\").change(function() {\n\t\tif ($(\"body.order_page form input:checkbox:checked\").length > 0)\n\t\t{\n\t\t\t$('.add-to-cart').prop(\"disabled\", false);\n\t\t\t// $('.tooltip-wrapper').tooltip('hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('.add-to-cart').prop(\"disabled\", true);\n\t\t\t// $('.tooltip-wrapper').tooltip('show');\n\t\t}\n\t});\n\n    //disable submit button if no radio button is selected\n\tif ($(\"body.order_page .shipping form input:radio:checked\").length === 0)\n\t{\n\t\t$('.checkout').addClass(\"disabled\");\n\t} else {\n\t\t$('.shipping'+$('body.order_page .shipping input:radio:checked').val()).addClass('selected');\n\t}\n\t\n\t$('body.order_page .shipping').on('change', 'input:radio', function(){\n\t\tif ($(\"body.order_page .shipping form input:radio:checked\").length > 0)\n\t\t{\n\t\t\t$('.checkout').removeClass(\"disabled\");\n\t\t}\n\t});\n\n\t$('body.order_page .shipping').on('click', '.checkout.disabled', function(e){\n\t\te.preventDefault();\n\n\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Select a shipping mode<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\tsetTimeout(removeAddedAlerts, 3000);\n\t});\n\n\tvar header = $(\".header\");\n    $(window).scroll(function() {\n        var scroll = $(window).scrollTop();\n        if (scroll >= 80) {\n            header.addClass(\"scrolled-down\");\n        } else {\n            header.removeClass(\"scrolled-down\");\n        }\n    });\n\n    $(window).scrollTop($(window).scrollTop()+1);\n    $(window).scrollTop($(window).scrollTop()-1);\n\n    // $('.tooltip-wrapper').tooltip({position: \"bottom\"});\n    function removeAddedAlerts(){\n\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t}\t\t\n\t}\n\n\tfunction repeatRemoveAddedAlerts(){\n\t\tremoveAddedAlerts();\n\t}\n});"]}