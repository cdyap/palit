{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$('body.admin').on('ready turbolinks:load', function () { $.onmount() });\n$('body.admin').on('turbolinks:before-cache', function () { $.onmount.teardown() });\n\n$(document).on('turbolinks:load',function(){\n\t;(function ($) {\n\n\t    'use strict';\n\n\t    $('.alert[data-auto-dismiss]').each(function (index, element) {\n\t        var $element = $(element),\n\t            timeout  = $element.data('auto-dismiss') || 5000;\n\n\t        setTimeout(function () {\n\t            $element.alert('close');\n\t        }, timeout);\n\t    });\n\n\t})(jQuery);\n\n\t$('body.admin').ready(function(){\n\t\t$('.dropright').on('shown.bs.dropdown', function(){\n\t\t\t$(this).addClass('active');\n\t\t});\n\t\t$('.dropright').on('hidden.bs.dropdown', function(){\n\t\t\t$(this).removeClass('active');\n\t\t});\n\t\tvar header = $(\".navbar\");\n\n\t    $(window).scroll(function() {\n\t        var scroll = $(window).scrollTop();\n\t        if (scroll >= 80) {\n\t            header.addClass('z-depth-1-half');\n\t        } else {\n\t            header.removeClass(\"z-depth-1-half\");\n\t        }\n\t    });\n\n\t    $(window).scrollTop($(window).scrollTop()+1);\n\t    $(window).scrollTop($(window).scrollTop()-1);\n\t});\n\n\t$('body.admin.index.AdminController').ready(function(){\n\t\t// $('.auto-confirm input[type=\"checkbox\"]').on('change', function(){\n\t\t// \ttoggleAutoConfirm(this.checked);\n\t\t// });\n\n\t\t// function toggleAutoConfirm(auto_confirm_orders){\n\n\t\t// \ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t// \tvar data_for_sending = {};\n\t\t// \tdata_for_sending.auto_confirm_orders = auto_confirm_orders;\n\t\t// \tdata_for_sending._token = token;\n\t\t// \t// data_for_sending._method = \"PATCH\";\n\t\t\t\n\t\t// \turl = \"/orders/toggleAutoConfirm\";\n\n\t\t// \t$.ajaxSetup({\n\t\t// \t    beforeSend: function(xhr, type) {\n\t\t// \t        if (!type.crossDomain) {\n\t\t// \t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t// \t        }\n\t\t// \t    },\n\t\t// \t});\n\t\t// \t$.ajax({\n\t\t// \t    dataType: 'JSON',\n\t\t// \t    method: 'PATCH',\n\t\t// \t    url: url,\n\t\t// \t    data: JSON.stringify(data_for_sending),\n\t\t// \t    contentType: \"json\",\n\t\t// \t    processData: false,\n\t\t// \t    success: function(a) {\n\t\t// \t    \tif(a.success) {\n\t\t// \t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Auto-confirm orders <strong>'+a.message+'</strong>!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t// \t\t    }\n\t\t// \t    }\n\t\t//   \t});\t\n\n\t\t//   \tsetTimeout(removeAddedAlerts, 5000);\n\t\t// }\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n\t$('body.admin.shipping.SettingsController').ready(function(){\n\t\t$('table.shippings_table').on('click', '.toggle_availability_shipping', function(){\n\t\t\ttoggle_available_shipping($(this).data('variant'));\n\t\t});\n\n\t\tfunction toggle_available_shipping(shipping_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.shipping_id = shipping_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailabilityShipping/\" + shipping_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong>!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').removeClass('text-red');\n\t\t\t\t    \t$row.find('.availability').addClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Available');\n\t\t\t\t    \t$row.find('.toggle_availability_shipping').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong>!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').addClass('text-red');\n\t\t\t\t    \t$row.find('.availability').removeClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Unavailable');\n\t\t\t\t    \t$row.find('.toggle_availability_shipping').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\t$('body.admin.show.ProductsController, body.admin.new.ProductsController').ready(function(){\n\t\t$('[data-toggle=\"tooltip\"]').tooltip();\n\t\t\n\t\t// prevent 'enter' submitting form.\n\t\t// $('form:not(\".with-cascading-disabling, #add_variant_form\")').on(\"keypress\", \":input:not(textarea)\", function(event) {\n\t\t//     return event.keyCode != 13;\n\t\t// });\n\n\t\t$(\"form.with-cascading-disabling input[name=attribute_1]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\tfor (var i = 2; i <= 5; i++) {\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_2]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\t\t$(\"form.with-cascading-disabling input[name=attribute_2]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\tfor (var i = 3; i <= 5; i++) {\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_3]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\t\t$(\"form.with-cascading-disabling input[name=attribute_3]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\tfor (var i = 4; i <= 5; i++) {\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").val(null);\n\t\t\t\t\t\t$(\"form input[name=attribute_\"+i+\"]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_4]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\t\t$(\"form.with-cascading-disabling input[name=attribute_4]\").on(\"change paste keyup\", function() {\n\t\t\tswitch($(this).val().length) {\n\t\t\t\tcase 0: \n\t\t\t\t\t$(\"form input[name=attribute_5]\").val(null);\n\t\t\t\t\t$(\"form input[name=attribute_5]\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$(\"form input[name=attribute_5]\").removeAttr(\"disabled\");\n\t\t\t\t\tbreak;\n\n\t\t\t} \n\t\t});\n\n\t\t$('a.close.delete-variant').popover({\n\t\t\ttrigger: 'focus'\n\t\t});\n\n\t\t$('a.close.delete-variant').on('inserted.bs.popover', function () {\n\t\t\t$(this).addClass('highlight');\n\t\t});\n\n\t\t$('a.close.delete-variant').on('hide.bs.popover', function () {\n\t\t\t$(this).removeClass('highlight');\n\t\t});\n\n\t\t$('table.table').on('click', 'a.close.delete-variant.highlight', function() {\n\t\t\tvariant_id = $(this).attr('variant');\n\t\t\tdelete_variant(variant_id);\n\t\t});\n\n\t\tfunction delete_variant(variant_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.variant_id = variant_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t\n\t\t\turl = \"/deleteVariant/\" + variant_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'DELETE',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tconsole.log(a);\n\n\t\t\t    },\n\t\t\t    error: function(a) {\n\t\t\t    \t\n\t\t\t    }\n\t\t  \t});\t\t\n\t\t}\n\n\t\t$('#toggle_availability').click(function(){\n\t\t\ttoggle_available($(this).attr('variant'));\n\t\t});\n\n\t\t$('#toggle_availability_collection').click(function(){\n\t\t\ttoggle_available_collection($(this).attr('collection'));\n\t\t});\n\n\t\t$('table.variants_table').on('click', '.toggle_availability_variant', function(){\n\t\t\ttoggle_available_variant($(this).data('variant'));\n\t\t});\n\n\t\tfunction toggle_available(product_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.product_id = product_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailability/\" + product_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').removeClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('AVAILABLE');\n\t\t\t\t    \t$('#toggle_availability').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').addClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('UNAVAILABLE');\n\t\t\t\t    \t$('#toggle_availability').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction toggle_available_collection(collection_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.collection_id = collection_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t\n\t\t\turl = \"/toggleAvailabilityCollection/\" + collection_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').removeClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('AVAILABLE');\n\t\t\t\t    \t$('#toggle_availability_collection').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('#product_availability').addClass('text-red');\n\t\t\t\t    \t$('#product_availability').text('UNAVAILABLE');\n\t\t\t\t    \t$('#toggle_availability_collection').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction toggle_available_variant(variant_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.variant_id = variant_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailabilityVariant/\" + variant_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').removeClass('text-red');\n\t\t\t\t    \t$row.find('.availability').addClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Available');\n\t\t\t\t    \t$row.find('.toggle_availability_variant').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.class);\n\t\t\t\t    \t$row.find('.availability').addClass('text-red');\n\t\t\t\t    \t$row.find('.availability').removeClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Unavailable');\n\t\t\t\t    \t$row.find('.toggle_availability_variant').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\t$('#add_variant_form').submit(function(e){\n\t\t\te.preventDefault();\n\n\t\t\t$.ajaxSetup({\n\t\t\t  headers: {\n\t\t\t    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t  }\n\t\t\t});\n\n\t\t\t$this_form = $(this);\n\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: $('#add_variant_form').attr('method'),\n\t\t\t    url: $('#add_variant_form').attr('action'),\n\t\t\t    data: $('#add_variant_form').serialize(),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.success) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.message+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\n\t\t\t\t\t\tnew_variant = '<tr class=\"variant_'+a.variant.id+'\" data-id=\"'+a.variant.id+'\" data-inventory=\"'+a.variant.inventory+'\" data-price=\"'+a.variant.price+'\" data-itemID=\"'+a.variant.id+'\"><td class=\"sortable-handle\"><i class=\"fas fa-arrows-alt-v\"></i></td><td class=\"attribute_1\">'+a.variant.attribute_1+'</td>';\n\t\t\t\t\t\tif (typeof a.variant.attribute_2 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_2\">'+a.variant.attribute_2+'</td>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof a.variant.attribute_3 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_3\">'+a.variant.attribute_3+'</td>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof a.variant.attribute_4 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_4\">'+a.variant.attribute_4+'</td>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof a.variant.attribute_5 !== 'undefined'){\n\t\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"attribute_5\">'+a.variant.attribute_5+'</td>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnew_variant = new_variant + '<td class=\"text-right\">'+a.variant.inventory+'</td><td class=\"text-right\">'+a.variant.view_price+'</td><td class=\"text-center availability text-green\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Available\"><i class=\"fas fa-circle\"></i></td><td><div class=\"btn-group dropright float-right\"><div class=\"option-dropdown\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><i class=\"fas fa-ellipsis-v\"></i></div><div class=\"dropdown-menu\"><a class=\"dropdown-item edit_variant\" href=\"javascript:void(0);\">Edit variant</a><a class=\"dropdown-item toggle_availability_variant\" href=\"javascript:void(0);\" data-variant=\"'+a.variant.id+'\">Make unavailable</a><div class=\"dropdown-divider\"></div><a class=\"dropdown-item delete\" onClick=\"window.location.reload()\">Click to refresh and delete this variant.</a></div></div></td></tr>';\n\t\t\t\t\t\t$('#available_inventory').text(a.available_inventory);\n\t\t\t\t\t\t$('table.variants_table').append(new_variant);\n\t\t\t\t\t\t$('#no_variants_yet').remove();\n\t\t\t\t\t\tconsole.log(a);\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.message+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>').fadeTo(2000, 500);\n\t\t\t\t    \t$('#available_inventory').text(a.available_inventory);\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(a) {\n\t\t\t    \tconsole.log(a);\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\t\t  \t$this_form.find('input[name=attribute_1],input[name=attribute_2],input[name=attribute_3],input[name=attribute_4],input[name=attribute_5]').val(\"\");\n\t\t  \t$this_form.find('input[name=inventory]').val(0);\n\t\t\t$this_form.find('input[name=attribute_1]').select();\n\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t$(\"body\").tooltip({\n\t\t\t    selector: '[data-toggle=\"tooltip\"]'\n\t\t\t});\n\t\t});\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t\t\n\t\t$('table.table').on('show.bs.dropdown', 'td .dropright', function(){\n\t\t\t$(this).parents('tr').addClass('active');\n\t\t\t$(this).parents('table').removeClass('table-hover');\n\t\t});\n\n\t\t$('table.table').on('hidden.bs.dropdown', 'td .dropright', function(){\n\t\t\t$(this).parents('tr').removeClass('active');\n\t\t\t$(this).parents('table').addClass('table-hover');\n\t\t});\n\n\t\t$('table.table').on('click', '.edit_variant', function() {\n\t\t\t$('#edit_variant_block').removeClass('hide');\n\n\t\t\t$row = $(this).closest('tr');\n\t\t\t$('#edit_variant_block').find('input[name=attribute_1]').val($row.find('.attribute_1').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_2]').val($row.find('.attribute_2').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_3]').val($row.find('.attribute_3').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_4]').val($row.find('.attribute_4').text());\n\t\t\t$('#edit_variant_block').find('input[name=attribute_5]').val($row.find('.attribute_5').text());\n\t\t\t$('#edit_variant_block').find('input[name=inventory]').val($row.data('inventory'));\n\t\t\t$('#edit_variant_block').find('input[name=variant_id]').val($row.data('id'));\n\t\t\t$('#edit_variant_block').find('input[name=price]').val($row.data('price'));\n\t\t});\n\n\t\t$('#edit_variant_block').on('click', 'button.close', function() {\n\t\t\t$('#edit_variant_block').addClass('hide');\n\t\t\t$('#edit_variant_block form').reset();\n\t\t});\n\n\t\t//https://github.com/boxfrommars/rutorika-sortable\n\t\t/**\n\t     *\n\t     * @param type string 'insertAfter' or 'insertBefore'\n\t     * @param entityName\n\t     * @param id\n\t     * @param positionId\n\t     */\n\t\tvar changePosition = function(requestData){\n\t        $.ajax({\n\t            'url': '/sort',\n\t            'type': 'POST',\n\t            'data': requestData,\n\t            'success': function(data) {\n\t                if (data.success) {\n\t                    $('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Variant reordered!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t                    setTimeout(removeAddedAlerts, 5000);\n\t                } else {\n\t                \t$.each( data.errors, function( key, value ) {\n\t                \t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+value+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t                    \n\t                }\n\t            },\n\t            'error': function(e){\n\t                $('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+e.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t                console.log(e);\n\t                setTimeout(removeAddedAlerts, 5000);\n\t            }\n\t        });\n\t    };\n\n\t    var $sortableTable = $('.variants_table tbody');\n\t    if ($sortableTable.length > 0) {\n\t        $sortableTable.sortable({\n\t            handle: '.sortable-handle',\n\t            axis: 'y',\n\t            update: function(a, b){\n\n\t                var entityName = $(this).data('entityname');\n\t                var $sorted = b.item;\n\n\t                var $previous = $sorted.prev();\n\t                var $next = $sorted.next();\n\n\t                if ($previous.length > 0) {\n\t                    changePosition({\n\t                        parentId: $sorted.data('parentid'),\n\t                        type: 'moveAfter',\n\t                        entityName: entityName,\n\t                        id: $sorted.data('itemid'),\n\t                        positionEntityId: $previous.data('itemid'),\n\t                        _token: $(\"meta[name='csrf-token']\").attr('content')\n\t                    });\n\t                } else if ($next.length > 0) {\n\t                    changePosition({\n\t                        parentId: $sorted.data('parentid'),\n\t                        type: 'moveBefore',\n\t                        entityName: entityName,\n\t                        id: $sorted.data('itemid'),\n\t                        positionEntityId: $next.data('itemid'),\n\t                        _token: $(\"meta[name='csrf-token']\").attr('content')\n\t                    });\n\t                } else {\n\t                    $('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Something went wrong!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t                }\n\t            },\n\t            cursor: \"move\"\n\t        });\n\t        setTimeout(removeAddedAlerts, 5000);\n\t    }\n\t});\n\n\t$('body.admin.show.CollectionsController, body.admin.new.CollectionsController').ready(function(){\n\t\t\n\t\t$('table.products_table').on('click', '.toggle_availability_product', function(){\n\t\t\ttoggle_available_product($(this).data('product'));\n\t\t});\n\n\t\t$('table.products_table').on('click', '.remove', function(){\n\t\t\tremove_from_collection($(this).data('product'),$(this).data('collection'));\n\t\t});\n\n\t\t$('.add_product_block').click(function(){\n\t\t\tshow_add_product_block($(this).data('collectionslug'));\n\t\t});\n\n\t\tfunction show_add_product_block(collection_slug){\n\t\t\t$.get('/getProductsForCollection/'+collection_slug, function(a){ \n\t\t        $table = $('#add_product_form .table tbody');\n\t\t        $table.empty();\n\t\t        $.each( a.products, function( key, value ) {\n\t\t        \tproduct = '<tr><td><div class=\"form-check\"><input class=\"form-check-input\" type=\"checkbox\" name=\"products[]\" value=\"'+value+'\"></div></td><td>'+key+'</td></tr>';\n\t\t        \t$table.append(product);\n\t\t        });\n\t\t        \n\t\t    });\n\n\t\t\t$('#add_product_block').removeClass('hide');\n\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\n\t\t}\n\n\t\tfunction toggle_available_product(product_id){\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.product_id = product_id;\n\t\t\tdata_for_sending._token = token;\n\t\t\t// data_for_sending._method = 'PATCH';\n\t\t\t\n\t\t\turl = \"/toggleAvailability/\" + product_id;\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: 'PATCH',\n\t\t\t    url: url,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.is_available) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>available</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.slug);\n\t\t\t\t    \t$row.find('.availability').removeClass('text-red');\n\t\t\t\t    \t$row.find('.availability').addClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Available');\n\t\t\t\t    \t$row.find('.toggle_availability_product').text('Make unavailable');\n\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+' <strong>unavailable</strong> for sale!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$row = $('.' + a.slug);\n\t\t\t\t    \t$row.find('.availability').addClass('text-red');\n\t\t\t\t    \t$row.find('.availability').removeClass('text-green');\n\t\t\t\t    \t$row.find('.availability').attr('data-original-title', 'Unavailable');\n\t\t\t\t    \t$row.find('.toggle_availability_product').text('Make available');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \tconsole.log(xhr);\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+xhr.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction remove_from_collection(product_slug, collection_slug) {\n\t\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\t\tvar data_for_sending = {};\n\t\t\tdata_for_sending.product_slug = product_slug;\n\t\t\tdata_for_sending.collection_slug = collection_slug;\n\t\t\tdata_for_sending._token = token;\n\t\t\t\n\t\t\turl = \"/removeFromCollection\";\n\n\t\t\t$.ajaxSetup({\n\t\t\t    beforeSend: function(xhr, type) {\n\t\t\t        if (!type.crossDomain) {\n\t\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t\t        }\n\t\t\t    },\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t    method: 'POST',\n\t\t\t    url: url,\n\t\t\t    contentType: \"json\",\n\t\t\t    processData: false,\n\t\t\t    data: JSON.stringify(data_for_sending),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.success) {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.product_name+' removed from '+a.collection_name+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    \t$('.' + product_slug).remove();\n\t\t\t\t    } else {\n\t\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Something went wrong!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t    }\n\t\t\t    },\n\t\t\t    error: function(xhr, status, error) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+xhr.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\n\t\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t\t}\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n\t$('body.admin.show.ProductsController, body.admin.show.CollectionsController').ready(function(){ \n\n\t\tif($('#upload-image-dropzone').length) {\n\t\t\tvar myDropzone = new Dropzone('#upload-image-dropzone',{\n\t\t        paramName: 'file',\n\t\t        addRemoveLinks: true,\n\t\t        maxFilesize: 2, // MB\n\t\t        maxFiles: 1,\n\t\t        acceptedFiles: \".jpeg,.jpg,.png,.gif\",\n\t\t        init: function() {\n\t\t\t\t    this.on('addedfile', function(file) {\n\t\t\t\t\t\tif (this.files.length > 1) {\n\t\t\t\t\t   \t\tthis.removeFile(this.files[0]);\n\t\t\t\t\t  \t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tsuccess: function(xhr, url, status) {\n\t\t\t        $('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Header image uploaded!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t        $('.dz-progress').css('display', 'none');\n\t\t\t        $('.dz-remove').html('Remove file and upload new image');\n\t\t\t        $(\".header-image-block img\").attr(\"src\",url);\n\t\t\t        setTimeout(removeAddedAlerts, 5000);\n\t\t\t        $('#uploadImage').modal('hide');\n\t\t\t        $('.header-image-block.hide').removeClass('hide');\n\t\t\t        $('.delete-header-image-option.hide').removeClass('hide');\n\t\t\t    },\n\t\t\t\terror: function(xhr, error, status) {\n\t\t\t\t\t$('.dz-details, .dz-progress').css('display', 'none');\n\t\t\t\t\t$('.dz-remove').html('Remove upload');\n\n\t\t\t\t\tif (error !== null && typeof error === 'object') {\n\t\t\t\t\t\t$.each( error.errors.file, function( key, value ) {\n\t\t\t\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+value+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+error+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t    \t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n\t$('body.admin.index.InventoryController').ready(function(){\n\t\t// $('.inventory-table tbody tr').click(function(){\n\t\t// \tproduct_id = $(this).data('product');\n\t\t// \t$('.product-block').addClass('hide');\n\t\t// \t$('.block-'+product_id).removeClass('hide');\n\t\t// })\n\t\t//highlight whole input of inputs on form\n\t\t$('.delivery-modal').on('click', 'input[type=number]', function(){\n\t\t\t$(this).select();\n\t\t});\n\t});\n\n\t$('body.admin.create.InventoryController').ready(function(){\n\t\t$('select.select-product').change(function(){\n\t\t\t$('form.select-product').submit();\n\t\t})\n\n\t\t//change datepicker if javascript is available\n\t\t$('.datepicker').attr('type','text');\n\t\t$('.datepicker').prop('readonly', true);\n\t\t$('.datepicker').datepicker({\n\t\t  format: 'yyyy-mm-dd',\n\t\t  autoHide: true,\n\t\t  trigger: false,\n\t\t  startDate: new Date\n\t\t});\n\n\t\t//highlight whole input of inputs on form\n\t\t$('.product-block').on('click', 'input[type=number]', function(){\n\t\t\t$(this).select();\n\t\t});\n\n\t\t//get product/variant information and populate form\n\t\t$('form.select-product').submit(function(e){\n\t\t\te.preventDefault();\n\t\t\t$.ajaxSetup({\n\t\t\t  headers: {\n\t\t\t    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t\t\t  }\n\t\t\t});\n\n\t\t\t$this_form = $(this);\n\t\t\t$('.product-quantity').val(\"\");\n\t\t\t$('.product-quantity').attr(\"name\", \"xx\");\n\t\t\t$('.variants-to-add input').remove();\n\n\t\t\t$.ajax({\n\t\t\t    dataType: 'JSON',\n\t\t\t    method: $this_form.attr('method'),\n\t\t\t    url: $this_form.attr('action'),\n\t\t\t    data: $this_form.serialize(),\n\t\t\t    success: function(a) {\n\t\t\t    \tif(a.success) {\n\t\t\t\t    \t$('.product-block').removeClass('hide');\n\t\t\t\t    \t$('.product-block .product-name').text(a.product.name);\n\t\t\t\t    \t$('.product-block .product-inventory').text(a.available_inventory);\n\t\t\t\t    \t$('.product-block .product-incoming').text(a.incoming_inventory);\n\t\t\t\t    \t$('.product-block .product-orders').text(a.orders);\n\t\t\t\t    \tconsole.log(a);\n\t\t\t\t    \t\n\t\t\t\t    \tif(a.has_variants) {\n\t\t\t\t    \t\t$('.product-to-add').addClass('hide');\n\t\t\t\t    \t\t$('.variants-to-add').removeClass('hide');\n\t\t\t\t    \t\t$('.variants-to-add table tbody').find('tr').remove();\n\t\t\t\t    \t\t$('.variants-to-add table').find('td,th').remove();\n\t\t\t\t    \t\t\n\t\t\t\t    \t\t$.each(a.variant_columns, function(key, value) {\n\t\t\t\t    \t\t\tcolumn = \"<th>\"+value.value+\"</th>\";\n\t\t\t\t    \t\t\t$('.variants-to-add table thead').append(column);\n\t\t\t\t    \t\t});\n\t\t\t\t    \t\t$('.variants-to-add table thead').append(\"<th class='text-right'>Inventory</th><th class='text-right'>Incoming</th><th class='text-right'>Orders</th><th style='width:170px'>Quantity to add</th>\");\n\n\t\t\t\t    \t\t$.each(a.product.variants, function(key, value) {\n\t\t\t\t    \t\t\tcolumn = \"<tr>\";\n\t\t\t\t    \t\t\tvariant_columns = \"\";\n\t\t\t\t    \t\t\tif(typeof value.attribute_1 !== 'undefined' && value.attribute_1 !== null) {\n\t\t\t\t    \t\t\t\tcolumn = column + \"<td>\"+value.attribute_1+\"</td>\";\n\t\t\t\t    \t\t\t\tvariant_columns = variant_columns + a.variant_columns[0].value + \": \" + value.attribute_1;\n\t\t\t\t    \t\t\t}\n\t\t\t\t    \t\t\tif(typeof value.attribute_2 !== 'undefined' && value.attribute_2 !== null) {\n\t\t\t\t    \t\t\t\tcolumn = column + \"<td>\"+value.attribute_2+\"</td>\";\n\t\t\t\t    \t\t\t\tvariant_columns = variant_columns + \", \" + a.variant_columns[1].value + \": \" + value.attribute_2;\n\t\t\t\t    \t\t\t}\n\t\t\t\t    \t\t\tif(typeof value.attribute_3 !== 'undefined' && value.attribute_3 !== null) {\n\t\t\t\t    \t\t\t\tcolumn = column + \"<td>\"+value.attribute_3+\"</td>\";\n\t\t\t\t    \t\t\t\tvariant_columns = variant_columns  + \", \"+ a.variant_columns[2].value + \": \" + value.attribute_3;\n\t\t\t\t    \t\t\t}\n\t\t\t\t    \t\t\tif(typeof value.attribute_4 !== 'undefined' && value.attribute_4 !== null) {\n\t\t\t\t    \t\t\t\tcolumn = column + \"<td>\"+value.attribute_4+\"</td>\";\n\t\t\t\t    \t\t\t\tvariant_columns = variant_columns + \", \" + a.variant_columns[3].value + \": \" + value.attribute_4;\n\t\t\t\t    \t\t\t}\n\t\t\t\t    \t\t\tif(typeof value.attribute_5 !== 'undefined' && value.attribute_5 !== null) {\n\t\t\t\t    \t\t\t\tcolumn = column + \"<td>\"+value.attribute_5+\"</td>\";\n\t\t\t\t    \t\t\t\tvariant_columns = variant_columns + \", \" + a.variant_columns[4].value + \": \" + value.attribute_5;\n\t\t\t\t    \t\t\t}\n\t\t\t\t    \t\t\tcolumn = column + \"<td class='text-right'>\"+value.available_inventory+\"</td>\"\n\t\t\t\t    \t\t\tcolumn = column + \"<td class='text-right'>\"+value.incoming_inventory+\"</td>\"\n\t\t\t\t    \t\t\tcolumn = column + \"<td class='text-right'>\"+value.inventory+\"</td>\"\n\t\t\t\t    \t\t\tcolumn = column + '<td><input type=\"number\" class=\"form-control\" name=\"variant['+value.id+']\" min=\"0\" data-product=\"'+a.product.name+'\" data-description=\"'+variant_columns+'\" value=\"0\"></td>';\n\t\t\t\t    \t\t\tcolumn = column + \"</tr>\";\n\t\t\t\t    \t\t\t$('.variants-to-add table tbody').append(column);\n\t\t\t\t    \t\t});\n\t\t\t\t    \t} else {\n\t\t\t\t    \t\t$('.product-to-add').removeClass('hide');\n\t\t\t\t    \t\t$('.variants-to-add').addClass('hide');\n\t\t\t\t    \t\t$('.product-block .product-quantity').attr('name', \"product[\"+a.product.id+\"]\");\n\t\t\t\t    \t\t$('.product-block .product-quantity').attr('data-product', a.product.name);\n\t\t\t\t    \t\t// $('.product-block .product-quantity').data('product', a.product.name);\n\t\t\t\t    \t\t$('.product-block .product-to-add input').select();\n\t\t\t\t    \t}\n\t\t\t\t\t\t\n\t\t\t\t    } \n\t\t\t    },\n\t\t\t    error: function(a) {\n\t\t\t    \tconsole.log(a);\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.statusText+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t  \t});\t\n\t\t  \t\n\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t$(\"body\").tooltip({\n\t\t\t    selector: '[data-toggle=\"tooltip\"]'\n\t\t\t});\n\t\t});\n\n\t\t//remove items from delivery cart\n\t\t$('table.table .delivery-cart').on('click', 'td button', function(){\n\t\t\tif ($('.delivery-cart table.table tbody tr').length === 1) {\n\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>You cannot remove the only item in the delivery cart<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t} else {\n\t\t\t\t$(this).closest('tr').remove();\t\n\t\t\t}\t\t\n\t\t});\n\n\t\t//add to delivery\n\t\t$('.add-to-delivery').click(function(){\n\t\t\t$form_inputs = $('.product-block').find('input');\n\t\t\t// inputs = [];\n\t\t\tcount = 0;\n\t\t\t$.each($form_inputs, function(key, value) {\n\t\t\t\t// form = [value.name, value.value];\n\t\t\t\tif (value.name !== \"xx\" && value.value !== \"0\" && value.value !== \"\") {\n\t\t\t\t\tif ($('.delivery-cart table.table input[name=\"'+value.name+'\"]').length === 0) {\n\t\t\t\t\t\tcount = count + 1;\n\t\t\t\t\t\t$('.delivery-cart').removeClass('hide');\n\t\t\t\t\t\tif(!value.dataset.description){\n\t\t\t\t\t\t\tvalue.dataset.description = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\trow = \"<tr><td>\"+value.dataset.product+\"</td><td>\"+value.dataset.description+\"</td><td>\" + value.value + \"</td><input type='hidden' value='\"+value.value+\"' name='\"+value.name+\"' class=''><td><button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button></td></tr>\";\n\t\t\t\t\t\t$('.delivery-cart form table tbody').append(row);\n\n\t\t\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Item added<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcount = count + 1;\n\t\t\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Item already in delivery cart<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tif(count == 0) {\n\t\t\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>All quantities entered are 0<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t} else {\n\t\t\t\t// Make sure this.hash has a value before overriding default behavior\n\t\t\t    if (this.hash !== \"\") {\n\t\t\t      // Prevent default anchor click behavior\n\t\t\t      event.preventDefault();\n\t\t\t      // Store hash\n\t\t\t      var hash = this.hash;\n\t\t\t      // Using jQuery's animate() method to add smooth page scroll\n\t\t\t      // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area\n\t\t\t      $('html, body').animate({\n\t\t\t        scrollTop: $(hash).offset().top - 100 \n\t\t\t      }, 400, function(){\n\t\t\t   \n\t\t\t        // Add hash (#) to URL when done scrolling (default click behavior)\n\t\t\t        window.location.hash = \"\";\n\t\t\t      });\n\t\t\t    } // End if\n\t\t\t}\n\t\t});\n\n\t\tfunction removeAddedAlerts(){\n\t\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t\t}\t\t\n\t\t}\n\n\t\tfunction repeatRemoveAddedAlerts(){\n\t\t\tremoveAddedAlerts();\n\t\t}\n\t});\n\n});\n\n$('body.order_page').ready(function(){\n\t$('.dropright').on('shown.bs.dropdown', function(){\n\t\t$(this).addClass('active');\n\t});\n\t$('.dropright').on('hidden.bs.dropdown', function(){\n\t\t$(this).removeClass('active');\n\t});\n\n\t$('body.order_page .cart-modal table.table').on('click', 'a.remove', function(){\n\t\tremoveFromCart($(this).data('company'), $(this).data('rowid'));\n\t});\n\n\t$('body.order_page .product-modal table.table').on('click', 'tbody tr', function(event){\n\n\t\tif (event.target.type !== 'checkbox') {\n\t\t\t$(':checkbox', this).trigger('click');\n\t\t}\n\t});\n\n\tvar debounceChangeQuantity = function(object) {debounce(changeQuantity(object.data('company'), object.data('rowid'), object.val()), 1000, false)};\n\n\t$('body.order_page .cart-modal table.table').on('change', '.item-quantity', function(){\n\t\tdebounceChangeQuantity($(this));\n\t});\n\n\t$('body.order_page .cart-modal table.table').on('click', '.quantity-adjuster.plus', function(){\n\t\tinput = $(this).parent().next();\n\t\tmax = input.attr('max');\n\n\t\t// For some browsers, `attr` is undefined; for others,\n\t\t// `attr` is false.  Check for both.\n\t\tif (typeof attr !== typeof undefined && attr !== false) {\n\t\t\tnew_val = +input.val() + 1;\n\t\t\tinput.val(new_val);\n\t\t} else {\n\t\t\tval = +input.val();\n\t\t\tif(val + 1 <= max) {\n\t\t\t\tnew_val = +input.val() + 1;\n\t\t\t\tinput.val(new_val);\n\t\t\t}\n\t\t}\n\t\tdebounceChangeQuantity(input);\n\t});\n\n\t$('body.order_page .cart-modal table.table').on('click', '.quantity-adjuster.minus', function(){\n\t\tinput = $(this).parent().next();\n\t\tval = +input.val();\n\t\tif(val - 1 >= 1) {\n\t\t\tnew_val = +input.val() - 1;\n\t\t\tinput.val(new_val);\n\t\t}\n\t\tdebounceChangeQuantity(input);\n\t});\n\n\t// Returns a function, that, as long as it continues to be invoked, will not\n\t// be triggered. The function will be called after it stops being called for\n\t// N milliseconds. If `immediate` is passed, trigger the function on the\n\t// leading edge, instead of the trailing.\n\twindow.debounce = function (func, wait, immediate) {\n\t\tvar timeout;\n\t\treturn function() {\n\t\t\tvar context = this, args = arguments;\n\t\t\tvar later = function() {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) func.apply(context, args);\n\t\t\t};\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (callNow) func.apply(context, args);\n\t\t};\n\t}\n\n\t$('div.catalogue table tbody tr').addClass('hover-pointer');\n\n\t$('.item-quantity').click(function(){\n\t\t$(this).select();\n\t});\n\n\t$('body.order_page .shipping').on('click', '.shipping-method-radio', function(){\n\t\t$('.shipping-mode').removeClass('selected');\n\t\t$('.shipping'+$(this).val()).addClass('selected');\n\t});\n\n\tif ($('#checkout_form').length === 1) {\n\t\t$('#checkout_form').validate({\n\t\t\trules: {\n\t\t\t\temail: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\temail:true,\n\t\t\t\t},\n\t\t\t\tfirst_name: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tlast_name: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tcountry_code: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tcontact_number: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdigits: true,\n\t\t\t\t},\n\t\t\t\tshipping_address_1: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tcity: {\n\t\t\t\t\trequired: true,\n\t\t\t\t},\n\t\t\t\tzip_code: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdigits: true\n\t\t\t\t},\n\t\t\t\tcountry: {\n\t\t\t\t\trequired: true,\n\t\t\t\t}\n\t\t\t},\n\t\t\tsubmitHandler: function(form) {\n\t\t\t    form.submit();\n\t\t\t}\n\t\t});\n\t}\n\n\twindow.changeQuantity = function(companyId, rowId, quantity){\n\n\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\tvar data_for_sending = {};\n\t\tdata_for_sending.rowId = rowId;\n\t\tdata_for_sending.slug = companyId;\n\t\tdata_for_sending.quantity = quantity;\n\t\tdata_for_sending._token = token;\n\t\t// data_for_sending._method = \"PATCH\";\n\t\t\n\t\turl = \"/changeQuantity/\" + companyId + \"/\" + rowId;\n\n\t\t$.ajaxSetup({\n\t\t    beforeSend: function(xhr, type) {\n\t\t        if (!type.crossDomain) {\n\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t        }\n\t\t    },\n\t\t});\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: 'PATCH',\n\t\t    url: url,\n\t\t    data: JSON.stringify(data_for_sending),\n\t\t    contentType: \"json\",\n\t\t    processData: false,\n\t\t    success: function(a) {\n\t\t    \tif(a.success) {\n\t\t\t    \t$('.cart-item.'+a.rowId+' .item_price').text(a.item_price);\n\t\t\t    \t$('#cart_itemcount').text(a.cart_itemcount);\n\t\t\t    \t$('#cart_total').text(a.currency + \" \" + a.cart_total);\n\t\t\t    } else {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Error in updating cart item<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t\t\tsetTimeout(removeAddedAlerts, 5000);\n\t\t\t    }\n\t\t    }\n\t  \t});\t\n\t}\n\n\tfunction removeFromCart(companySlug, rowId){\n\n\t\ttoken = $('meta[name=\"csrf-token\"]').attr('content');\n\n\t\tvar data_for_sending = {};\n\t\tdata_for_sending.rowId = rowId;\n\t\tdata_for_sending.slug = companySlug;\n\t\tdata_for_sending._token = token;\n\t\t// data_for_sending._method = 'PATCH';\n\t\t\n\t\turl = \"/removeFromCart/\" + companySlug + \"/\" + rowId;\n\n\t\t$.ajaxSetup({\n\t\t    beforeSend: function(xhr, type) {\n\t\t        if (!type.crossDomain) {\n\t\t            xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n\t\t        }\n\t\t    },\n\t\t});\n\t\t$.ajax({\n\t\t    dataType: 'JSON',\n\t\t    method: 'PATCH',\n\t\t    url: url,\n\t\t    data: JSON.stringify(data_for_sending),\n\t\t    success: function(a) {\n\t\t    \tif(a.success) {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss><strong>'+a.name+'</strong> removed!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    \t$('#cart_itemcount').text(a.cart_itemcount);\n\t\t\t    \t$('#cart_total').text(a.cart_total);\n\t\t\t    \t$row = $('.' + a.rowId);\n\t\t\t    \t$row.remove();\n\t\t\t    \tif ($('.cart-modal table.table tr.cart-item').length === 0) {\n\t\t\t    \t\t$('#cart').modal('hide');\n\t\t\t    \t\tlocation.reload();\n\t\t\t    \t}\n\t\t\t    } else {\n\t\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-success alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+a.name+'!<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t\t    }\n\t\t    },\n\t\t    error: function(xhr, status, error) {\n\t\t    \t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>'+JSON.parse(xhr.responseText)+'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\t    }\n\t  \t});\t\n\n\t  \tsetTimeout(removeAddedAlerts, 5000);\n\t}\n\n    $(\"body.order_page form .form-check-input\").change(function() {\n\t\tif ($(\"body.order_page form input:checkbox:checked\").length > 0)\n\t\t{\n\t\t\t$('.add-to-cart').prop(\"disabled\", false);\n\t\t\t// $('.tooltip-wrapper').tooltip('hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('.add-to-cart').prop(\"disabled\", true);\n\t\t\t// $('.tooltip-wrapper').tooltip('show');\n\t\t}\n\t});\n\n    //disable submit button if no radio button is selected\n\tif ($(\"body.order_page .shipping form input:radio:checked\").length === 0)\n\t{\n\t\t$('.checkout').addClass(\"disabled\");\n\t} else {\n\t\t$('.shipping'+$('body.order_page .shipping input:radio:checked').val()).addClass('selected');\n\t}\n\t\n\t$('body.order_page .shipping').on('change', 'input:radio', function(){\n\t\tif ($(\"body.order_page .shipping form input:radio:checked\").length > 0)\n\t\t{\n\t\t\t$('.checkout').removeClass(\"disabled\");\n\t\t}\n\t});\n\n\t$('body.order_page .shipping').on('click', '.checkout.disabled', function(e){\n\t\te.preventDefault();\n\n\t\t$('.alerts-holder').prepend('<div class=\"alert alert-error alert-dismissible fade show z-depth-1-half\" role=\"alert\" data-auto-dismiss>Select a shipping mode<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>');\n\t\tsetTimeout(removeAddedAlerts, 3000);\n\t});\n\n\tvar header = $(\".header\");\n    $(window).scroll(function() {\n        var scroll = $(window).scrollTop();\n        if (scroll >= 80) {\n            header.addClass(\"scrolled-down\");\n        } else {\n            header.removeClass(\"scrolled-down\");\n        }\n    });\n\n    $(window).scrollTop($(window).scrollTop()+1);\n    $(window).scrollTop($(window).scrollTop()-1);\n\n    // $('.tooltip-wrapper').tooltip({position: \"bottom\"});\n    function removeAddedAlerts(){\n\t\t$('.alerts-holder .alert:last').alert('close');\n\n\t\tif ($('.alerts-holder .alert').length > 1) {\n\t\t\tsetTimeout(repeatRemoveAddedAlerts, 3000);\n\t\t}\t\t\n\t}\n\n\tfunction repeatRemoveAddedAlerts(){\n\t\tremoveAddedAlerts();\n\t}\n});"]}